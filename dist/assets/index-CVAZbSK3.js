import{y as e,e as c,J as w,B as P,T as m,V as E}from"./index-CHQce48J.js";import{f as R,u as I,F as l,L as n,a as h,D as A,b as J,c as L,e as B,I as u,o as C,J as V}from"./DropdownOption-Czou7W0x.js";import{B as O}from"./Button-Cfxy88bD.js";import"./PurePanel-2nwk_mCG.js";import"./Overflow-eXOomLay.js";import"./index-Bw1EJUoI.js";import"./SearchOutlined-BF9FnvGx.js";import"./useIcons-BrLR4d6J.js";import"./button-Dfh7hiHe.js";function k({name:i="",placeholder:x,content:t,control:j,className:a}){const{field:o}=R({control:j,name:i,defaultValue:""});return e.jsx("div",{className:"relative w-full",children:e.jsx("textarea",{id:i,...o,className:`w-full py-4 px-5 rounded-lg font-medium transition-all border border-solid border-[#DFDFDF] resize-none min-h-[200px] focus:outline-none focus:ring-1 focus:ring-[#3F8CFF] ${a}`,placeholder:x,value:o.value,children:t})})}function W(){const{control:i,handleSubmit:x,setValue:t,reset:j,formState:{errors:a}}=I({mode:"onChange",resolver:C(V),defaultValues:{titlePost:"",phone:"",address:"",jobType:"",description:"",pic1:void 0,pic2:void 0,pic3:void 0,pic4:void 0}}),[o,v]=c.useState(!1),{objJobType:g}=w(s=>s.typeReducer),F=P(),[f,b]=c.useState(),N=async s=>{b(s),t("jobType",s.name)},S=async()=>{const s=E();F(s)};c.useEffect(()=>{S()},[]);const[D,d]=c.useState([!1,!1,!1,!1]),p=s=>{d(r=>{const y=[...r];return y[s]=!0,y})},T=async()=>{try{if(D.some(s=>s)){m.error("Vui lòng tải lại ảnh!");return}m.success("Đã đăng bài thành công!"),j({titlePost:"",phone:"",address:"",jobType:"",description:"",pic1:void 0,pic2:void 0,pic3:void 0,pic4:void 0}),v(!0),b(void 0)}catch(s){m.error("Đăng bài thất bại!"),console.error("Add error:",s)}};return c.useEffect(()=>{o&&v(!1)},[o]),c.useEffect(()=>{var r;const s=Object.values(a);s.length>0&&m.error((r=s[0])==null?void 0:r.message)},[a]),console.log("🚀 ~ useEffect ~ arrErrors:",Object.values(a)),e.jsx("div",{className:"py-20 px-[72px]",children:e.jsxs("div",{className:"bg-white py-4 shadow-md px-11 rounded-xl",children:[e.jsx("div",{className:"mb-5 py-10",children:e.jsx("div",{children:e.jsx("h1",{className:"text-[40px] font-semibold capitalize",children:"Đăng bài ứng tuyển"})})}),e.jsxs("form",{onSubmit:x(T),children:[e.jsx("div",{className:"mb-5 lg:mb-10",children:e.jsxs(l,{children:[e.jsx(n,{htmlFor:"titlePost",children:"Tiêu đề ứng tuyển"}),e.jsx(h,{name:"titlePost",placeholder:"Nhập tiêu đề",control:i})]})}),e.jsxs("div",{className:"form-layout",children:[e.jsxs(l,{children:[e.jsx(n,{htmlFor:"phone",children:"Số điện thoại"}),e.jsx(h,{name:"phone",placeholder:"Nhập số điện thoại",control:i})]}),e.jsxs(l,{children:[e.jsx(n,{children:"Loại công việc"}),e.jsxs(A,{children:[e.jsx(J,{value:`${(f==null?void 0:f.name)||"Loại công việc"}`}),e.jsx(L,{children:(Array.isArray(g)?g:[]).map(s=>e.jsx(B,{name:"jobType",onClick:()=>N(s),children:s.name},s.id))})]})]})]}),e.jsxs("div",{className:"form-layout-col4",children:[e.jsx("div",{className:"col-span-2",children:e.jsxs(l,{children:[e.jsx(n,{htmlFor:"address",children:"Địa chỉ"}),e.jsx(h,{name:"address",placeholder:"Nhập địa chỉ, tên đường",control:i})]})}),e.jsx("div",{className:"col-span-1",children:e.jsxs(l,{children:[e.jsx(n,{htmlFor:"district",children:"Quận / Huyện"}),e.jsx(h,{name:"district",placeholder:"Nhập quận, huyện",control:i})]})}),e.jsx("div",{className:"col-span-1",children:e.jsxs(l,{children:[e.jsx(n,{htmlFor:"province",children:"Tỉnh / Thành Phố"}),e.jsx(h,{name:"province",placeholder:"Nhập tỉnh, thành phố",control:i})]})})]}),e.jsxs("div",{className:"mt-24",children:[e.jsx(n,{htmlFor:"",children:"Tải ảnh về công việc và nơi làm việc"}),e.jsx("div",{className:"border border-solid border-[#D5D5D5] rounded-3xl p-4 mt-10 mb-20",children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsx(u,{name:"pic1",onFileSelect:s=>{s&&(t("pic1",s),d(r=>(r[0]=!1,r)))},resetTrigger:o,onRemove:()=>p(0)}),e.jsx(u,{name:"pic2",onFileSelect:s=>{s&&(t("pic2",s),d(r=>(r[1]=!1,r)))},resetTrigger:o,onRemove:()=>p(1)}),e.jsx(u,{name:"pic3",onFileSelect:s=>{s&&(t("pic3",s),d(r=>(r[2]=!1,r)))},resetTrigger:o,onRemove:()=>p(2)}),e.jsx(u,{name:"pic4",onFileSelect:s=>{s&&(t("pic4",s),d(r=>(r[3]=!1,r)))},resetTrigger:o,onRemove:()=>p(3)})]})})]}),e.jsx("div",{children:e.jsxs(l,{children:[e.jsx(n,{htmlFor:"description",children:"Mô tả"}),e.jsx(k,{name:"description",control:i,placeholder:"Mô tả ..."})]})}),e.jsx(O,{type:"submit",title:"Đăng Bài",className:"w-full mt-10"})]})]})})}export{W as default};
